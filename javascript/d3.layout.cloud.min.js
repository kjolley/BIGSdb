(function(M){if("object"===typeof exports&&"undefined"!==typeof module)module.exports=M();else if("function"===typeof define&&define.amd)define([],M);else{var d="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this;d=d.d3||(d.d3={});d=d.layout||(d.layout={});d.cloud=M()}})(function(){return function A(d,f,l){function B(w,m){if(!f[w]){if(!d[w]){var a="function"==typeof require&&require;if(!m&&a)return a(w,!0);if(F)return F(w,!0);m=Error("Cannot find module '"+
w+"'");throw m.code="MODULE_NOT_FOUND",m;}m=f[w]={exports:{}};d[w][0].call(m.exports,function(a){var x=d[w][1][a];return B(x?x:a)},m,m.exports,A,d,f,l)}return f[w].exports}for(var F="function"==typeof require&&require,D=0;D<l.length;D++)B(l[D]);return B}({1:[function(d,f,l){function A(a){return a.text}function B(){return"serif"}function F(){return"normal"}function D(a){return Math.sqrt(a.value)}function w(){return 30*(~~(6*Math.random())-3)}function m(){return 1}function a(a){var c=a[0]/a[1];return function(a){return[c*
(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function g(a){for(var c=[],x=-1;++x<a;)c[x]=0;return c}function x(){return document.createElement("canvas")}function c(a){return"function"===typeof a?a:function(){return a}}var h=d("d3-dispatch").dispatch,N=Math.PI/180;f.exports=function(){function d(a){a.width=a.height=1;var c=Math.sqrt(a.getContext("2d").getImageData(0,0,1,1).data.length>>2);a.width=2048/c;a.height=2048/c;a=a.getContext("2d");a.fillStyle=a.strokeStyle="red";a.textAlign="center";return{context:a,
ratio:c}}var r=[256,256],H=A,f=B,l=D,E=F,O=F,P=w,Q=m,R=a,L=[],S=Infinity,J=h("word","end"),G=null,K=Math.random,k={},T=x;k.canvas=function(a){return arguments.length?(T=c(a),k):T};k.start=function(){function a(){for(var a=Date.now();Date.now()-a<S&&++m<w&&G;){var u=F[m];u.x=r[0]*(K()+.5)>>1;u.y=r[1]*(K()+.5)>>1;a:{var b=u,e=F,v=m;if(!b.sprite){var g=c.context,q=c.ratio;g.clearRect(0,0,2048/q,2048/q);var d=0,f=0,n=0,p=e.length;for(--v;++v<p;){b=e[v];g.save();g.font=b.style+" "+b.weight+" "+~~((b.size+
1)/q)+"px "+b.font;var t=g.measureText(b.text+"m").width*q,y=b.size<<1;if(b.rotate){var C=Math.sin(b.rotate*N),l=Math.cos(b.rotate*N),z=t*l,A=t*C;l*=y;t=y*C;t=Math.max(Math.abs(z+t),Math.abs(z-t))+31>>5<<5;y=~~Math.max(Math.abs(A+l),Math.abs(A-l))}else t=t+31>>5<<5;y>n&&(n=y);2048<=d+t&&(d=0,f+=n,n=0);if(2048<=f+y)break;g.translate((d+(t>>1))/q,(f+(y>>1))/q);b.rotate&&g.rotate(b.rotate*N);g.fillText(b.text,0,0);b.padding&&(g.lineWidth=2*b.padding,g.strokeText(b.text,0,0));g.restore();b.width=t;b.height=
y;b.xoff=d;b.yoff=f;b.x1=t>>1;b.y1=y>>1;b.x0=-b.x1;b.y0=-b.y1;b.hasText=!0;d+=t}g=g.getImageData(0,0,2048/q,2048/q).data;for(q=[];0<=--v;)if(b=e[v],b.hasText){t=b.width;n=t>>5;y=b.y1-b.y0;for(p=0;p<y*n;p++)q[p]=0;d=b.xoff;if(null==d)break a;f=b.yoff;z=0;A=-1;for(C=0;C<y;C++){for(p=0;p<t;p++)l=g[2048*(f+C)+(d+p)<<2]?1<<31-p%32:0,q[n*C+(p>>5)]|=l,z|=l;z?A=C:(b.y0++,y--,C--,f++)}b.y1=b.y0+A;b.sprite=q.slice(0,(b.y1-b.y0)*n)}}}if(b=u.hasText)a:{b=x;e=u;v=h;d=e.x;f=e.y;t=Math.sqrt(r[0]*r[0]+r[1]*r[1]);
y=R(r);g=.5>K()?1:-1;for(q=-g;p=y(q+=g);){n=~~p[0];p=~~p[1];if(Math.min(Math.abs(n),Math.abs(p))>=t)break;e.x=d+n;e.y=f+p;if(!(n=0>e.x+e.x0||0>e.y+e.y0||e.x+e.x1>r[0]||e.y+e.y1>r[1])&&(n=v))b:{n=r[0];n>>=5;p=e.sprite;z=e.width>>5;var I=e.x-(z<<4);A=I&127;C=32-A;l=e.y1-e.y0;for(var H=(e.y+e.y0)*n+(I>>5),D=0;D<l;D++){for(var E=I=0;E<=z;E++)if((I<<C|(E<z?(I=p[D*z+E])>>>A:0))&b[H+E]){n=!0;break b}H+=n}n=!1}if(!n&&(!v||e.x+e.x1>v[0].x&&e.x+e.x0<v[1].x&&e.y+e.y1>v[0].y&&e.y+e.y0<v[1].y)){v=e.sprite;d=e.width>>
5;f=r[0]>>5;q=e.x-(d<<4);t=q&127;y=32-t;g=e.y1-e.y0;q=(e.y+e.y0)*f+(q>>5);for(p=0;p<g;p++){for(z=n=0;z<=d;z++)b[q+z]=b[q+z]|n<<y|(z<d?(n=v[p*d+z])>>>t:0);q+=f}delete e.sprite;b=!0;break a}}b=!1}b&&(B.push(u),J.call("word",k,u),h?(b=u,e=h[0],v=h[1],b.x+b.x0<e.x&&(e.x=b.x+b.x0),b.y+b.y0<e.y&&(e.y=b.y+b.y0),b.x+b.x1>v.x&&(v.x=b.x+b.x1),b.y+b.y1>v.y&&(v.y=b.y+b.y1)):h=[{x:u.x+u.x0,y:u.y+u.y0},{x:u.x+u.x1,y:u.y+u.y1}],u.x-=r[0]>>1,u.y-=r[1]>>1)}m>=w&&(k.stop(),J.call("end",k,B,h))}var c=d(T()),x=g((r[0]>>
5)*r[1]),h=null,w=L.length,m=-1,B=[],F=L.map(function(a,c){a.text=H.call(this,a,c);a.font=f.call(this,a,c);a.style=E.call(this,a,c);a.weight=O.call(this,a,c);a.rotate=P.call(this,a,c);a.size=~~l.call(this,a,c);a.padding=Q.call(this,a,c);return a}).sort(function(a,c){return c.size-a.size});G&&clearInterval(G);G=setInterval(a,0);a();return k};k.stop=function(){G&&(clearInterval(G),G=null);return k};k.timeInterval=function(a){return arguments.length?(S=null==a?Infinity:a,k):S};k.words=function(a){return arguments.length?
(L=a,k):L};k.size=function(a){return arguments.length?(r=[+a[0],+a[1]],k):r};k.font=function(a){return arguments.length?(f=c(a),k):f};k.fontStyle=function(a){return arguments.length?(E=c(a),k):E};k.fontWeight=function(a){return arguments.length?(O=c(a),k):O};k.rotate=function(a){return arguments.length?(P=c(a),k):P};k.text=function(a){return arguments.length?(H=c(a),k):H};k.spiral=function(a){return arguments.length?(R=U[a]||a,k):R};k.fontSize=function(a){return arguments.length?(l=c(a),k):l};k.padding=
function(a){return arguments.length?(Q=c(a),k):Q};k.random=function(a){return arguments.length?(K=a,k):K};k.on=function(){var a=J.on.apply(J,arguments);return a===J?k:a};return k};var U={archimedean:a,rectangular:function(a){var c=4*a[0]/a[1],x=0,g=0;return function(a){var h=0>a?-1:1;switch(Math.sqrt(1+4*h*a)-h&3){case 0:x+=c;break;case 1:g+=4;break;case 2:x-=c;break;default:g-=4}return[x,g]}}}},{"d3-dispatch":2}],2:[function(d,f,l){(function(d,B){"object"===typeof l&&"undefined"!==typeof f?B(l):
B(d.d3=d.d3||{})})(this,function(d){function f(){for(var a=0,g=arguments.length,x={},c;a<g;++a){if(!(c=arguments[a]+"")||c in x)throw Error("illegal type: "+c);x[c]=[]}return new l(x)}function l(a){this._=a}function A(a,g){return a.trim().split(/^|\s+/).map(function(a){var c="",h=a.indexOf(".");0<=h&&(c=a.slice(h+1),a=a.slice(0,h));if(a&&!g.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function w(a,g,d){for(var c=0,h=a.length;c<h;++c)if(a[c].name===g){a[c]=m;a=a.slice(0,
c).concat(a.slice(c+1));break}null!=d&&a.push({name:g,value:d});return a}var m={value:function(){}};l.prototype=f.prototype={constructor:l,on:function(a,g){var d=this._,c=A(a+"",d),h,f=-1,l=c.length;if(2>arguments.length)for(;++f<l;){var m;if(m=h=(a=c[f]).type){a:{m=d[h];for(var r=0,B=m.length;r<B;++r)if((h=m[r]).name===a.name){h=h.value;break a}h=void 0}m=h}if(m)return h}else{if(null!=g&&"function"!==typeof g)throw Error("invalid callback: "+g);for(;++f<l;)if(h=(a=c[f]).type)d[h]=w(d[h],a.name,g);
else if(null==g)for(h in d)d[h]=w(d[h],a.name,null);return this}},copy:function(){var a={},d=this._,f;for(f in d)a[f]=d[f].slice();return new l(a)},call:function(a,d){if(0<(h=arguments.length-2))for(var g=Array(h),c=0,h,f;c<h;++c)g[c]=arguments[c+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);f=this._[a];c=0;for(h=f.length;c<h;++c)f[c].value.apply(d,g)},apply:function(a,d,f){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);a=this._[a];for(var c=0,g=a.length;c<g;++c)a[c].value.apply(d,
f)}};d.dispatch=f;Object.defineProperty(d,"__esModule",{value:!0})})},{}]},{},[1])(1)});
//# sourceMappingURL=d3.layout.cloud.min.js.map
