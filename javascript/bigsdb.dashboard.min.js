var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var e=c.length;for(b=b||0;b<e;b++)if(c[b]==a||Object.is(c[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");var grid;
$(function(){var a=$("#layout").val(),c=$("#fill_gaps").prop("checked");grid=(new Muuri(".grid",{dragEnabled:!0,layout:{alignRight:a.includes("right"),alignBottom:a.includes("bottom"),fillGaps:c}})).on("move",function(){saveLayout(grid)});order_defined&&loadLayout(grid,order);$("#panel_trigger,#close_trigger").click(function(){$("#modify_panel").toggle("slide",{direction:"right"},"fast");$("#panel_trigger").show();return!1});$("#panel_trigger").show();$("#layout").change(function(){a=$("#layout").val();
grid._settings.layout.alignRight=a.includes("right");grid._settings.layout.alignBottom=a.includes("bottom");grid.layout();$.ajax(ajax_url+"&attribute=layout&value="+a)});$("#fill_gaps").change(function(){c=$("#fill_gaps").prop("checked");grid._settings.layout.fillGaps=c;grid.layout();$.ajax(ajax_url+"&attribute=fill_gaps&value="+(c?1:0))});$(".dashboard_control").click(function(){var a=$(this).attr("data-id");$("span#control_"+a).hide();$("span#wait_"+a).show();event.preventDefault();this.blur();
$.get(modal_control_url+"&control="+a,function(b){$(b).appendTo("body").modal();$("span#control_"+a).show();$("span#wait_"+a).hide()})});["width","height"].forEach(function(a){$(document).on("change","."+a+"_select",function(b){b=$(this).attr("id").replace("_"+a,"");changeElementDimension(b,a)})})});
function changeElementDimension(a,c){var b=$("div.item[data-id='"+a+"'] > div.item-content"),d=b.attr("class").split(/\s+/);$.each(d,function(a,d){d.includes("dashboard_element_"+c)&&b.removeClass(d)});d=$("input[name='"+a+"_"+c+"']:checked").val();b.addClass("dashboard_element_"+c+d);$("span#"+a+"_"+c).html(d);grid.refreshItems().layout()}function serializeLayout(a){a=a.getItems().map(function(a){return a.getElement().getAttribute("data-id")});return JSON.stringify(a)}
function loadLayout(a,c){c=JSON.parse(c);for(var b=a.getItems(),d=b.map(function(a){return a.getElement().getAttribute("data-id")}),e=[],f,g=0;g<c.length;g++)f=c[g],f=d.indexOf(f),-1<f&&e.push(b[f]);a.sort(e,{layout:"instant"})}function saveLayout(a){a=serializeLayout(a);$.post(url,{db:instance,page:"dashboard",updatePrefs:1,attribute:"order",value:a})}
function resetDefaults(){$("#modify_panel").toggle("slide",{direction:"right"},"fast");$.get($reset_url,function(){$("#layout").val("left-top");$("#fill_gaps").prop("checked",!0);location.reload()})};
//# sourceMappingURL=bigsdb.dashboard.min.js.map
