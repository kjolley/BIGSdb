var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");var grid;
$(function(){var a=$("#layout").val(),b=$("#fill_gaps").prop("checked");grid=(new Muuri(".grid",{dragEnabled:!0,layout:{alignRight:a.includes("right"),alignBottom:a.includes("bottom"),fillGaps:b}})).on("move",function(){saveLayout(grid)});order&&loadLayout(grid,order);$("#panel_trigger,#close_trigger").click(function(){$("#modify_panel").toggle("slide",{direction:"right"},"fast");$("#panel_trigger").show();return!1});$("#panel_trigger").show();$("#layout").change(function(){a=$("#layout").val();grid._settings.layout.alignRight=
a.includes("right");grid._settings.layout.alignBottom=a.includes("bottom");grid.layout();$.ajax(ajax_url+"&attribute=layout&value="+a)});$("#fill_gaps").change(function(){b=$("#fill_gaps").prop("checked");grid._settings.layout.fillGaps=b;grid.layout();$.ajax(ajax_url+"&attribute=fill_gaps&value="+(b?1:0))});$(".dashboard_control").click(function(){var a=$(this).attr("data-id");$("span#control_"+a).hide();$("span#wait_"+a).show();event.preventDefault();this.blur();$.get(modal_control_url+"&control="+
a,function(c){$(c).appendTo("body").modal();$("span#control_"+a).show();$("span#wait_"+a).hide()})});["width","height"].forEach(function(a){$(document).on("change","."+a+"_select",function(b){b=$(this).attr("id").replace("_"+a,"");changeElementDimension(b,a)})})});
function changeElementDimension(a,b){var c=$("div.item[data-id='"+a+"'] > div.item-content"),d=c.attr("class").split(/\s+/);$.each(d,function(a,d){d.includes("dashboard_element_"+b)&&c.removeClass(d)});d=$("input[name='"+a+"_"+b+"']:checked").val();c.addClass("dashboard_element_"+b+d);$("span#"+a+"_"+b).html(d);elements[a][b]=Number(d);$.post(ajax_url,{db:instance,page:"dashboard",updatePrefs:1,attribute:"elements",value:JSON.stringify(elements)});grid.refreshItems().layout()}
function serializeLayout(a){a=a.getItems().map(function(a){return a.getElement().getAttribute("data-id")});return JSON.stringify(a)}function loadLayout(a,b){b=JSON.parse(b);for(var c=a.getItems(),d=c.map(function(a){return a.getElement().getAttribute("data-id")}),e=[],f,g=0;g<b.length;g++)f=b[g],f=d.indexOf(f),-1<f&&e.push(c[f]);a.sort(e,{layout:"instant"})}function saveLayout(a){a=serializeLayout(a);$.post(url,{db:instance,page:"dashboard",updatePrefs:1,attribute:"order",value:a})}
function resetDefaults(){$("#modify_panel").toggle("slide",{direction:"right"},"fast");$.get($reset_url,function(){$("#layout").val("left-top");$("#fill_gaps").prop("checked",!0);location.reload()})};
//# sourceMappingURL=bigsdb.dashboard.min.js.map
