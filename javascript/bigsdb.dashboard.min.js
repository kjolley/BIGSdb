var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,d=[];!(c=a.next()).done;)d.push(c.value);return d};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.polyfill=function(a,c,d,e){if(c){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in d||(d[f]={});d=d[f]}a=a[a.length-1];e=d[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,d){return a===d?0!==a||1/a===1/d:a!==a&&d!==d}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,d){var c=this;c instanceof String&&(c=String(c));var f=c.length;for(d=d||0;d<f;d++)if(c[d]==a||Object.is(c[d],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,d){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,d||0)}},"es6","es3");
$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,e={next:function(){if(d<a.length){var f=d++;return{value:c(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var currentRequest=null,lastAjaxUpdate=(new Date).getTime(),ajaxDelay=1E3,MOBILE_WIDTH=480;
$(function(){showOrHideElements();$("select#add_field,label[for='add_field']").css("display","inline");var a=$("#fill_gaps").prop("checked"),c=$("#open_new").prop("checked");try{var d=(new Muuri("#dashboard",{dragEnabled:!0,layout:{fillGaps:a},dragStartPredicate:function(a,c){return enable_drag}})).on("move",function(){setGridMargins(d);saveLayout(d)});order&&loadLayout(d,order)}catch(e){console.log(e.message)}$("#record_age_slider").slider({min:0,max:7,value:recordAge,slide:function(a,c){$("#record_age").html(recordAgeLabels[c.value])},
change:function(a,c){a=url+"&page=dashboard&updateDashboard=1&type="+dashboard_type;a+="&attribute=record_age&value="+c.value;"undefined"!==typeof projectId&&(a+="&project_id="+projectId);$.ajax({url:a}).done(function(a){$("#loaded_dashboard").val(JSON.parse(a).dashboard_name);$("#loaded_dashboard").prop("disabled",!1);$("#delete_dashboard").css("display","inline");$("#filter_age").html(recordAgeLabels[c.value]);reloadAllElements();bumpVersion()})}});$("#dashboard_panel_trigger,#close_dashboard_trigger").click(function(){$("#modify_dashboard_panel").toggle("slide",
{direction:"right"},"fast");$("#dashboard_panel_trigger").show();return!1});$("#dashboard_panel_trigger").show();$(document).mouseup(function(a){var c=$("#modify_dashboard_panel");c.is(a.target)||0!==c.has(a.target).length||c.hide()});$("#fill_gaps").change(function(){a=$("#fill_gaps").prop("checked");try{d._settings.layout.fillGaps=a,d.layout()}catch(f){}var c=url+"&page=dashboard&updateDashboard=1&type="+dashboard_type;"undefined"!==typeof projectId&&(c+="&project_id="+projectId);c+="&attribute=fill_gaps&value="+
(a?1:0);$.ajax({url:c}).done(function(a){updateDashboardName(JSON.parse(a).dashboard_name)})});$("#enable_drag").change(function(){enable_drag=$("#enable_drag").prop("checked");$.ajax({url:url+"&page=dashboard&updateGeneralPrefs=1&attribute=enable_drag&value="+(enable_drag?1:0)})});$("#edit_elements").change(function(){var a=$("#edit_elements").prop("checked");$.ajax(url+"&page=dashboard&updateGeneralPrefs=1&attribute=edit_elements&value="+(a?1:0));$("span.dashboard_edit_element").css("display",a?
"inline":"none")});$("#remove_elements").change(function(){var a=$("#remove_elements").prop("checked");$.ajax(url+"&page=dashboard&updateGeneralPrefs=1&attribute=remove_elements&value="+(a?1:0));$("span.dashboard_remove_element").css("display",a?"inline":"none")});$("#open_new").change(function(){c=$("#open_new").prop("checked");$.ajax({url:url+"&page=dashboard&updateGeneralPrefs=1&attribute=open_new&value="+(c?1:0)}).done(function(){reloadElementsWithURL()})});$("#include_old_versions").change(function(){var a=
$("#include_old_versions").prop("checked"),c=url+"&page=dashboard&updateDashboard=1&type="+dashboard_type;"undefined"!==typeof projectId&&(c+="&project_id="+projectId);$.ajax({url:c+("&attribute=include_old_versions&value="+(a?1:0))}).done(function(c){updateDashboardName(JSON.parse(c).dashboard_name);$("#filter_versions").html(a?"all":"current");reloadAllElements();bumpVersion()})});$("#dashboard_palette").change(function(){var a=$("#dashboard_palette").val(),c=url+"&page=dashboard&updateDashboard=1&type="+
dashboard_type;"undefined"!==typeof projectId&&(c+="&project_id="+projectId);$.ajax({url:c+("&attribute=palette&value="+a)}).done(function(a){updateDashboardName(JSON.parse(a).dashboard_name);bumpVersion();reloadAllElements()})});$("#loaded_dashboard").change(function(){var a=$("#loaded_dashboard").val(),c=url+"&page=dashboard&type="+dashboard_type;"undefined"!==typeof projectId&&(c+="&project_id="+projectId);c+="&updateDashboardName="+encodeURIComponent(a);a.length&&$.ajax(c)});$("#switch_dashboard").change(function(){var a=
$("#switch_dashboard").val();a=url+"&page=dashboard&setActiveDashboard="+a+"&type="+dashboard_type;"undefined"!==typeof projectId&&(a+="&project_id="+projectId);$.ajax({url:a}).done(function(){$("input#search").length?$("input#search").trigger("click"):location.reload()})});$("#add_element").click(function(){var a=getNextid();addElement(d,a);setGridMargins(d)});$("div#dashboard").on("click touchstart",".dashboard_edit_element",function(){var a=$(this).attr("data-id");editElement(d,a)});$("div#dashboard").on("click touchstart",
".dashboard_remove_element",function(){var a=$(this).attr("data-id");removeElement(d,a)});$("div#dashboard").on("click touchstart",".setup_element",function(){var a=$(this).attr("data-id");editElement(d,a)});$("div#dashboard").on("click touchstart",".dashboard_data_query_element",function(){var a=$(this).attr("data-id"),c=url+"&page=query";a=getDataQueryParams(a);post(c,a)});$("div#dashboard").on("click touchstart",".dashboard_data_explorer_element",function(){var a=$(this).attr("data-id"),c=url+
"&page=explorer";a=getDataExplorerParams(a);post(c,a)});applyFormatting();["width","height"].forEach(function(a){$(document).on("change","."+a+"_select",function(c){c=$(this).attr("id").replace("_"+a,"");changeElementDimension(d,c,a)})});$(document).on("change",".element_option",function(a){var c=$(this).attr("id");a=c.replace(/^\d+_/,"");c=c.replace("_"+a,"");var e;"hide_mobile"==a?(e=$(this).prop("checked"))?$("div#element_"+c+" div.item-content").addClass("hide_mobile"):$("div#element_"+c+" div.item-content").removeClass("hide_mobile"):
e=$(this).val();changeElementAttribute(d,c,a,e)});$(document).on("click",".marker_colour",function(a){var c=$(this).attr("id");a=c.replace(/^\d+_/,"");c=c.replace("_"+a,"");a=a.replace(/^marker_/,"");changeElementAttribute(d,c,"marker_colour",a)});$(document).on("click change touchstart mouseup keyup",".marker_size",function(a){a=$(this).attr("id");a.replace("_"+c,"");var c=$(this).slider("option","value");a=a.replace("_marker_size","");changeElementAttribute(d,a,"marker_size",c)});$(document).on("change",
".palette_selector",function(a){a=$(this).attr("id");a=a.replace(/_palette$/,"");show_palette(a)});$(".multi_menu_trigger").on("click",function(){var a=this.id,c=a.replace("_trigger","_panel");"none"==$("#"+c).css("display")?($("#"+c).slideDown(),$("#"+a).html('<span class="fas fa-minus"></span>')):($("#"+c).slideUp(),$("#"+a).html('<span class="fas fa-plus"></span>'))});$("a#dashboard_toggle").on("click",function(){$.get(url+"&page=dashboard&updateGeneralPrefs=1&attribute=default&value=0",function(){window.location=
url})});$(window).resize(function(){showOrHideElements();setGridMargins(d);loadNewElements()});$("a#expand_trigger").click(function(a){a=250;2E3<$("#main_container").width()&&(a=500);setTimeout(function(){setGridMargins(d);d.refreshItems().layout()},a)});setGridMargins(d);window.dispatchEvent(new Event("resize"))});
function getDataQueryParams(a){var c={};elements[a].post_data&&(c=elements[a].post_data);c.page="query";c.db=instance;if(null!=elements[a].specific_values&&"specific values"==elements[a].visualisation_type){var d=elements[a].specific_values;c.list=Array.isArray(d)?d.join("\n"):d;c.attribute=elements[a].field}c.sent=1;$("#include_old_versions").prop("checked")&&(c.include_old="on");a=$("#record_age_slider").slider("value");0<a&&(c.prov_field1="f_date_entered",c.prov_operator1=">=",c.prov_value1=datestamps[a]);
"undefined"!==typeof projectId&&(c.project_list=projectId);return c}function getDataExplorerParams(a){var c={page:"explorer"};c.db=instance;c.field=elements[a].field;c.include_old_versions=$("#include_old_versions").prop("checked");c.record_age=$("#record_age_slider").length?$("#record_age_slider").slider("value"):0;null!=elements[a].specific_values&&(c.specific_values=elements[a].specific_values);"undefined"!==typeof projectId&&(c.project_id=projectId);return c}
function bumpVersion(){version=Date.now();$.ajax({url:url,type:"POST",data:{db:instance,page:"dashboard",updateDashboard:1,type:dashboard_type,project_id:"undefined"!==typeof projectId?projectId:null,attribute:"version",value:version}})}function updateDashboardName(a){$("#loaded_dashboard").val(a);$("#loaded_dashboard").prop("disabled",!1);$("#delete_dashboard").css("display","inline")}
function setGridMargins(a){if(null!=a){var c=155*Math.floor($("div#dashboard_panel").width()/155);$("div#dashboard").css("width",c);a.on("layoutEnd",function(){a.off("layoutEnd");var d=0;a.getItems().forEach(function(a){a=a.getPosition().left+a.getWidth();d=Math.max(d,a)});300>d&&(d=300);d+=10;d>c?$("div#dashboard").css("width",c):$("div#dashboard").css("width",d)})}}
function showOrHideElements(){var a=$(window).width()<MOBILE_WIDTH;$("div.hide_mobile").css("display",a?"none":"block");$("div.hide_border").css("border",a?"0":"1px solid #ccc");$.each(elements,function(a,d){"setup"==d.display&&$("div#element_"+d.id+" div.item-content").css("display","block")})}
function post(a,c,d){d=void 0===d?"post":d;var e=document.createElement("form");e.method=d;e.action=a;for(var f in c)c.hasOwnProperty(f)&&(a=document.createElement("input"),a.type="hidden",a.name=f,a.value=Array.isArray(c[f])?JSON.stringify(c[f]):c[f],e.appendChild(a));document.body.appendChild(e);e.submit()}function clean_value(a){if(null!=a)return Array.isArray(a)?(a=a.map(function(a){return a.trim()}),a=a.filter(function(a){return null!=a&&""!=a})):"string"===typeof a&&(a=a.trim()),a}
function changeElementAttribute(a,c,d,e){if("undefined"===typeof elements[c][d]||elements[c][d]!==e)"specific_values"!==d||Array.isArray(e)||(e=e.includes("\n")?e.split("\n"):e.split()),e=1==e||0==e?e?1:0:clean_value(e),elements[c][d]=e,saveAndReloadElement(a,c)}function applyFormatting(){fitty(".dashboard_big_number",{maxSize:64,observeMutations:!1});$(".item-content div.subtitle a").tooltip()}
function getNextid(){return 0===Object.keys(elements).length?1:Math.max.apply(Math,[].concat($jscomp.arrayFromIterable(Object.keys(elements))))+1}
function addElement(a,c){0===Object.keys(elements).length&&$("div#empty").html("");var d=url+"&page=dashboard&type="+dashboard_type;"undefined"!==typeof projectId&&(d+="&project_id="+projectId);d+="&new="+c;var e=$("#add_field").val();e&&(d+="&field="+e);null!=qryFile&&qryFile.length&&(d+="&qry_file="+qryFile);null!=listFile&&listFile.length&&null!=listAttribute&&listAttribute.length&&(d+="&list_file="+listFile+"&list_attribute="+listAttribute);lastAjaxUpdate=(new Date).getTime();$.get(d,function(d){try{var e=
document.createRange().createContextualFragment(JSON.parse(d).html);c in elements||(a.add([e.firstChild]),elements[c]=JSON.parse(d).element,saveElements(a));applyFormatting();showOrHideElements();$("div#element_"+c+" div.item-content").css("visibility","visible");updateDashboardName(JSON.parse(d).dashboard_name);$("#delete_dashboard").css("display","inline")}catch(k){console.log(k.message)}})}
function editElement(a,c,d){$("span#control_"+c).hide();$("span#wait_"+c).show();d=url+"&page=dashboard&type="+dashboard_type+"&control="+c;"undefined"!==typeof projectId&&(d+="&project_id="+projectId);$.get(d,function(d){$(d).appendTo("body").modal();$("#edit_elements").prop("checked")&&$("span#control_"+c).show();$("span#wait_"+c).hide();showOrHideControlElements(c);$("select.watermark_selector").fontIconPicker({theme:"fip-darkgrey",emptyIconValue:"none"});$("div.modal").on("change","#"+c+"_visualisation_type",
function(){showOrHideControlElements(c);checkAndShowVisualisation(a,c)});$("div.modal").on("change","#"+c+"_breakdown_display,#"+c+"_specific_value_display,#"+c+"_specific_values,#"+c+"_bar_colour_type",function(){showOrHideControlElements(c);checkAndShowVisualisation(a,c)});$("div.modal").on($.modal.AFTER_CLOSE,function(a,c){$("div.modal").remove()})})}
function showOrHideControlElements(a){var c=$("input[name='"+a+"_visualisation_type']:checked").val(),d=$("#"+a+"_specific_value_display").val(),e=$("#"+a+"_breakdown_display").val();$("fieldset#change_duration_control,fieldset#design_control,fieldset#order_control,fieldset#orientation_control,li#value_selector,li#breakdown_display_selector,li#specific_value_display_selector,li#top_value_selector,li#watermark_control,li#palette_control,li#text_colour_control,li#background_colour_control,li.gauge_colour,li#bar_colour_type,li#chart_colour,li#header_colour_control,li#header_background_colour_control,li#gps_map_control").css("display",
"none");"record_count"==elements[a].display?($("fieldset#change_duration_control,fieldset#design_control").css("display","inline"),$("li#text_colour_control,li#background_colour_control,li#watermark_control").css("display","block")):"seqbin_size"==elements[a].display?($("fieldset#design_control").css("display","inline"),$("li#chart_colour").css("display","block")):"specific values"===c?($("li#specific_value_display_selector,li#value_selector").css("display","block"),$("li#header_colour_control,li#header_background_colour_control").css("display",
"none"),"gauge"===d?($("fieldset#design_control").css("display","inline"),$("li.gauge_colour").css("display","block"),$("li#text_colour_control,li#background_colour_control").css("display","none")):"number"===d&&($("fieldset#change_duration_control,fieldset#design_control").css("display","inline"),$("li#watermark_control,li#text_colour_control,li#background_colour_control").css("display","block"))):"breakdown"===c&&($("li#breakdown_display_selector").css("display","block"),"bar"===e?($("fieldset#design_control,fieldset#order_control,fieldset#orientation_control,li#bar_colour_type").css("display",
"inline"),"continuous"===$("input[name='"+a+"_bar_colour_type']:checked").val()&&$("li#chart_colour").css("display","block")):"cumulative"===e?($("fieldset#design_control").css("display","inline"),$("li#chart_colour").css("display","block")):"map"===e?($("fieldset#design_control").css("display","inline"),$("li#palette_control").css("display","block"),show_palette(a)):"top"===e?($("fieldset#design_control").css("display","inline"),$("li#top_value_selector,li#header_colour_control,li#header_background_colour_control").css("display",
"block")):"gps_map"===e&&($("fieldset#design_control").css("display","inline"),$("li#gps_map_control").css("display","block")))}
function show_palette(a){var c={blue:colorbrewer.Blues[5],green:colorbrewer.Greens[5],purple:colorbrewer.Purples[5],orange:colorbrewer.Oranges[5],red:colorbrewer.Reds[5],"blue/green":colorbrewer.BuGn[5],"blue/purple":colorbrewer.BuPu[5],"green/blue":colorbrewer.GnBu[5],"orange/red":colorbrewer.OrRd[5],"purple/blue":colorbrewer.PuBu[5],"purple/blue/green":colorbrewer.PuBuGn[5],"purple/red":colorbrewer.PuRd[5],"red/purple":colorbrewer.RdPu[5],"yellow/green":colorbrewer.YlGn[5],"yellow/green/blue":colorbrewer.YlGnBu[5],
"yellow/orange/brown":colorbrewer.YlOrBr[5],"yellow/orange/red":colorbrewer.YlOrRd[5]};a=$("#"+a+"_palette").val();for(var d=0;5>d;d++)$("#palette_"+d).css("background",c[a][d])}
function checkAndShowVisualisation(a,c){var d=$("input[name='"+c+"_visualisation_type']:checked").val(),e=$("#"+c+"_breakdown_display").val(),f=$("#"+c+"_specific_value_display").val(),h=$("#"+c+"_specific_values").val();"specific values"===d?"0"!=f&&0!=h.length?(elements[c].display="field",elements[c].url=url+"&page=query",elements[c].url_text="Query records"):changeElementAttribute(a,c,"display","setup"):"breakdown"===d&&(0!=e?changeElementAttribute(a,c,"display","field"):changeElementAttribute(a,
c,"display","setup"))}
function reloadElement(a){var c=url+"&page=dashboard&ajax=1&type="+dashboard_type+"&v="+version;"undefined"!==typeof projectId&&(c+="&project_id="+projectId);c+="&element="+a;null!=qryFile&&qryFile.length&&(c+="&qry_file="+qryFile);null!=listFile&&listFile.length&&null!=listAttribute&&listAttribute.length&&(c+="&list_file="+listFile+"&list_attribute="+listAttribute);$.get(c,function(c){try{$("div#element_"+a+"> .item-content > .ajax_content").html(JSON.parse(c).html),elements[a]=JSON.parse(c).element,
applyFormatting()}catch(e){console.log(e.message)}})}function reloadAllElements(){$.each(Object.keys(elements),function(a,c){reloadElement(c)})}function reloadElementsWithURL(){$.each(Object.keys(elements),function(a,c){"specific values"!=elements[c].visualisation_type&&"top"==elements[c].breakdown_display&&reloadElement(c)})}
function loadNewElements(){$.each(Object.keys(elements),function(a,c){loadedElements[c]||$(window).width()<MOBILE_WIDTH&&elements[c].hide_mobile||(reloadElement(c),loadedElements[c]=1)})}function removeElement(a,c){var d=a.getItem($("div#element_"+c)[0]);a.remove([d],{removeElements:!0});delete elements[c];saveElements(a);0==Object.keys(elements).length&&$("div#empty").html(empty)}
function changeElementDimension(a,c,d){var e=$("div.item[data-id='"+c+"'] > div.item-content"),f=e.attr("class").split(/\s+/);$.each(f,function(a,c){c.includes("dashboard_element_"+d)&&e.removeClass(c)});f=$("input[name='"+c+"_"+d+"']:checked").val();e.addClass("dashboard_element_"+d+f);elements[c][d]=Number(f);saveAndReloadElement(a,c);a.refreshItems().layout()}
function saveElements(a){$.post(url,{db:instance,page:"dashboard",updateDashboard:1,type:dashboard_type,project_id:"undefined"!==typeof projectId?projectId:null,attribute:"elements",value:JSON.stringify(elements)});saveLayout(a)}
function saveAndReloadElement(a,c){currentRequest=$.ajax({url:url,type:"POST",data:{db:instance,page:"dashboard",updateDashboard:1,type:dashboard_type,project_id:"undefined"!==typeof projectId?projectId:null,attribute:"elements",value:JSON.stringify(elements)},beforeSend:function(){null!=currentRequest&&currentRequest.abort()},success:function(d){reloadElement(c);null!=a&&setGridMargins(a);updateDashboardName(JSON.parse(d).dashboard_name);bumpVersion()}})}
function serializeLayout(a){a=a.getItems().map(function(a){return a.getElement().getAttribute("data-id")});return JSON.stringify(a)}function loadLayout(a,c){c=JSON.parse(c);for(var d=a.getItems(),e=d.map(function(a){return a.getElement().getAttribute("data-id")}),f=[],h,k=0;k<c.length;k++)h=c[k],h=e.indexOf(h),-1<h&&f.push(d[h]);a.sort(f,{layout:"instant"})}
function saveLayout(a){var c=0;(new Date).getTime()-lastAjaxUpdate<ajaxDelay&&(c=ajaxDelay);setTimeout(function(){lastAjaxUpdate=(new Date).getTime();var c=serializeLayout(a);$.ajax({url:url,type:"POST",data:{db:instance,page:"dashboard",updateDashboard:1,type:dashboard_type,project_id:"undefined"!==typeof projectId?projectId:null,attribute:"order",value:c},success:function(a){$("#loaded_dashboard").val(JSON.parse(a).dashboard_name);$("#loaded_dashboard").prop("disabled",!1);$("#delete_dashboard").css("display",
"inline")}})},c)}function resetDefaults(){$("#modify_dashboard_panel").toggle("slide",{direction:"right"},"fast");var a=url+"&resetDefaults=1&type="+dashboard_type;"undefined"!==typeof projectId&&(a+="&project_id="+projectId);$.get(a,function(){$("input#search").length?$("input#search").trigger("click"):location.reload()})}
function resetSeqbinRange(a){delete elements[a].min;delete elements[a].max;saveAndReloadElement(null,a);$.ajax({url:url+"&seqbin_range=1",type:"GET",success:function(a){a=JSON.parse(a).range;$("#seqbin_range_slider").slider("option","values",[a.min,a.max]);$("#seqbin_min").html(a.min);$("#seqbin_max").html(a.max);$("#reset_seqbin_range").css("display","none")}})}
function createNew(){var a=url+"&newDashboard=1&type="+dashboard_type;"undefined"!==typeof projectId&&(a+="&project_id="+projectId);$.ajax({url:a,type:"GET",success:function(){$("input#search").length?$("input#search").trigger("click"):location.reload()}})}
function get_marker_layer(a,c,d){for(var e={red:"rgb(255,0,0,0.7)",blue:"rgb(0,0,255,0.7)",green:"rgb(13,130,58,0.7)",purple:"rgb(176,2,250,0.7)",orange:"rgb(250,85,2,0.7)",yellow:"rgb(252,207,3,0.7)",grey:"rgb(48,48,48,0.7)"},f=[],h=0;10>h;++h){var k=new ol.style.Style({image:new ol.style.Circle({radius:parseInt(d)+h,fill:new ol.style.Fill({color:e[c]})})});f.push(k)}var l=[1,2,5,10,25,50,100,250,500],m=[];a.forEach(function(a){var c=a.label.match(/(\-?\d+\.?\d*),\s*(\-?\d+\.?\d*)/);if(null!=c){var d=
parseFloat(c[1]);c=parseFloat(c[2]);for(var e,h=0;h<l.length;++h)if(parseInt(a.value)<=l[h]){e=h;break}null==e&&(e=l.length);a=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([c,d]))});a.setStyle(f[e]);m.push(a)}});return new ol.layer.Vector({source:new ol.source.Vector({features:m})})}function commify(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}
function lightOrDark(a){a=+("0x"+a.slice(1).replace(5>a.length&&/./g,"$&$&"));r=a>>16;g=a>>8&255;b=a&255;hsp=Math.sqrt(.299*r*r+.587*g*g+.114*b*b);return 127.5<hsp?"light":"dark"};
//# sourceMappingURL=bigsdb.dashboard.min.js.map
