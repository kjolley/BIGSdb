var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var d=this;d instanceof String&&(d=String(d));var c=d.length;for(b=b||0;b<c;b++)if(d[b]==a||Object.is(d[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$(function(){var a=$("#layout").val(),c=$("#fill_gaps").prop("checked"),b=(new Muuri(".grid",{dragEnabled:!0,layout:{alignRight:a.includes("right"),alignBottom:a.includes("bottom"),fillGaps:c}})).on("move",function(){saveLayout(b)});order&&loadLayout(b,order);$("#panel_trigger,#close_trigger").click(function(){$("#modify_panel").toggle("slide",{direction:"right"},"fast");$("#panel_trigger").show();return!1});$("#panel_trigger").show();$("#layout").change(function(){a=$("#layout").val();b._settings.layout.alignRight=
a.includes("right");b._settings.layout.alignBottom=a.includes("bottom");b.layout();$.ajax(ajax_url+"&attribute=layout&value="+a)});$("#fill_gaps").change(function(){c=$("#fill_gaps").prop("checked");b._settings.layout.fillGaps=c;b.layout();$.ajax(ajax_url+"&attribute=fill_gaps&value="+(c?1:0))});$("#edit_elements").change(function(){var a=$("#edit_elements").prop("checked");$.ajax(ajax_url+"&attribute=edit_elements&value="+(a?1:0));$("span.dashboard_edit_element").css("display",a?"inline":"none")});
$("#remove_elements").change(function(){var a=$("#remove_elements").prop("checked");$.ajax(ajax_url+"&attribute=remove_elements&value="+(a?1:0));$("span.dashboard_remove_element").css("display",a?"inline":"none")});$(".dashboard_edit_element").click(function(){var a=$(this).attr("data-id");$("span#control_"+a).hide();$("span#wait_"+a).show();$.get(modal_control_url+"&control="+a,function(b){$(b).appendTo("body").modal();$("span#control_"+a).show();$("span#wait_"+a).hide()})});$(".dashboard_remove_element").click(function(){var a=
$(this).attr("data-id"),c=b.getItem($("div#element_"+a)[0]);b.remove([c],{removeElements:!0});delete elements[a];saveElements(b)});["width","height"].forEach(function(a){$(document).on("change","."+a+"_select",function(c){c=$(this).attr("id").replace("_"+a,"");changeElementDimension(b,c,a)})});$("a#dashboard_toggle").on("click",function(){$.get(ajax_url+"&attribute=default&value=0",function(){window.location=url+"?db="+instance})})});
function changeElementDimension(a,c,b){var d=$("div.item[data-id='"+c+"'] > div.item-content"),e=d.attr("class").split(/\s+/);$.each(e,function(a,c){c.includes("dashboard_element_"+b)&&d.removeClass(c)});e=$("input[name='"+c+"_"+b+"']:checked").val();d.addClass("dashboard_element_"+b+e);$("span#"+c+"_"+b).html(e);elements[c][b]=Number(e);$.post(ajax_url,{db:instance,page:"dashboard",updatePrefs:1,attribute:"elements",value:JSON.stringify(elements)});a.refreshItems().layout()}
function saveElements(a){$.post(ajax_url,{db:instance,page:"dashboard",updatePrefs:1,attribute:"elements",value:JSON.stringify(elements)});saveLayout(a)}function serializeLayout(a){a=a.getItems().map(function(a){return a.getElement().getAttribute("data-id")});return JSON.stringify(a)}
function loadLayout(a,c){c=JSON.parse(c);for(var b=a.getItems(),d=b.map(function(a){return a.getElement().getAttribute("data-id")}),e=[],f,g=0;g<c.length;g++)f=c[g],f=d.indexOf(f),-1<f&&e.push(b[f]);a.sort(e,{layout:"instant"})}function saveLayout(a){a=serializeLayout(a);$.post(url,{db:instance,page:"dashboard",updatePrefs:1,attribute:"order",value:a})}
function resetDefaults(){$("#modify_panel").toggle("slide",{direction:"right"},"fast");$.get(reset_url,function(){$("#layout").val("left-top");$("#fill_gaps").prop("checked",!0);$("#edit_elements").prop("checked",!1);$("#remove_elements").prop("checked",!1);location.reload()})};
//# sourceMappingURL=bigsdb.dashboard.min.js.map
