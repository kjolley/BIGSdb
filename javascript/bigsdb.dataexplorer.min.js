$(function(){$(".tablesorter").tablesorter({widgets:["zebra"]});$("#record_age_slider").slider({min:0,max:7,value:recordAge,slide:function(a,b){$("#record_age").html(recordAgeLabels[b.value])},change:function(a,b){$("#filter_age").html(recordAgeLabels[b.value]);recordAge=b.value;reloadTable()}});$("#include_old_versions").change(function(){reloadTable()});$("div#data_explorer").on("click touchstart",".expand_link",function(){var a=this.id.replace("expand_","");$("#"+a).hasClass("expandable_expanded")?
$("#"+a).switchClass("expandable_expanded","expandable_retracted data_explorer",1E3,"easeInOutQuad",function(){$("#expand_"+a).html('<span class="fas fa-chevron-down"></span>')}):$("#"+a).switchClass("expandable_retracted data_explorer","expandable_expanded",1E3,"easeInOutQuad",function(){$("#expand_"+a).html('<span class="fas fa-chevron-up"></span>')})});$("div#data_explorer").on("change",".option_check,.field_selector",function(){canAnalyse()?$("#analyse").removeClass("disabled"):$("#analyse").addClass("disabled")});
$("div#data_explorer").on("click touchstart","#analyse",function(){canAnalyse()&&runAnalysis()});canAnalyse()&&$("#analyse").removeClass("disabled")});function canAnalyse(){var a=!1;$(".option_check").each(function(){!0===this.checked&&(a=!0)});var b=!1;$(".field_selector").each(function(){""!==this.value&&(b=!0)});return a&&b}
function runAnalysis(){$("div#waiting").css("display","block");var a=[];$(".option_check").each(function(){if(!0===this.checked){var b=this.id;b=b.replace("v","");a.push(dataIndex[b])}});var b=[field];$(".field_selector").each(function(){""!==this.value&&b.push(this.value)});var d={fields:b,values:a,include_old_versions:$("#include_old_versions").is(":checked")?1:0,record_age:recordAge};$.ajax({url:url+"&page=explorer",type:"POST",data:{analyse:1,db:instance,page:"explorer",params:JSON.stringify(d)},
success:function(a){$("div#waiting").css("display","none");a=JSON.parse(a);$("#frequency_test").html(JSON.stringify(a.frequencies));$("#hierarchy_test").html(JSON.stringify(a.hierarchy))}})}
function reloadTable(){$("div#waiting").css("display","block");var a=$("#include_old_versions").is(":checked")?1:0;$.ajax({url:url+"&page=explorer&updateTable=1&field="+field+"&record_age="+recordAge+"&include_old_versions="+a}).done(function(a){var b=JSON.parse(a).html;$("div#table_div").html(b);$(".tablesorter").tablesorter({widgets:["zebra"]});$("div#waiting").css("display","none");b=(b.match(/value_row/g)||[]).length;$("span#unique_values").html(b);var c=0;$("td.value_count").each(function(){var a=
$(this).html().replace(",","");c+=parseInt(a,10)||0});$("span#total_records").html(commify(c));dataIndex=JSON.parse(a).index;$("#analyse").addClass("disabled")})}function commify(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};
//# sourceMappingURL=bigsdb.dataexplorer.min.js.map
