#BIGSdb site-specific configuration file
#Set the attributes in this file specific to your system

###GENERAL####

#Location of web accessible temporary directory.
tmp_dir=/var/www/tmp

#Location of web-inaccessible secure temporary directory.
#Beware if your system uses systemd PrivateTmp - this may cause problems if you
#use /var/tmp since apache won't see files created by scripts run as the bigsdb
#user. This will affect the use of manually refreshed BLAST database caches.
#In this case it is better to use a temporary directory outside of /tmp
#or /var/tmp. Alternatively, disable the use of PrivateTmp by apache.
secure_tmp_dir=/var/tmp

#Set if your server does not record the client IP address correctly as it is 
#behind a router that strips this information from the request.
no_client_ip_address=0

#Location of web accessible submission directory.
submission_dir=/var/submissions

#Submission digests. If enabled, you must run the submission_digest.pl script
#(found in scripts/maintenance) regularly, e.g. every hour via CRON.
#Only enabled if using site-wide user databases.
submission_digests=0

#Copy curator in to close submission E-mail.
#Curator prefs override this setting if site-wide user databases are used.
submission_email_cc=0

#Directory used to contain system lock files
lock_dir=/var/run/lock

#Relative CSS and Javascript directories
#If uncommented then BIGSdb will not check if a required CSS or JS file exists.
#This is useful when using Apache aliases to serve CSS and JS files from a 
#directory that is outside of the web root. 
;relative_css_dir=/css
;relative_js_dir=/javascript

#Paths to additional stylesheets - add these as a comma-separated list if you
#need additional styles for your site.
;stylesheets=/css/site.css

#Site administrator E-mail address (optional)
#This is used for site-wide account administration if there are problems.
#site_admin_email=admin@your_domain.com

#Site user databases
#Set name of global user database - this is optional. If this is not used
#then each database will maintain its own set of user details. Usually
#only one database will be specified here, but multiple databases are
#supported (enter a comma-separated list of user databases - each consisting
#of a display name, followed by a pipe character (|) and the name of the 
#database).
;site_user_dbs=PubMLST|pubmlst_bigsdb_users

#Specify whether site users should register affiliation sector and/or country.
site_user_sector=1
site_user_country=1

#Site-wide accounts
#Allow users to request registration (set to 1 to enable).
auto_registration=0
new_account_validation_timeout_mins=60
inactive_account_removal_days=180
;registration_address=https://pubmlst.org/bigsdb

#SMTP server for sending E-mail updates (password reset, submissions, and offline jobs).
#smtp_server=127.0.0.1
#smtp_port=25
domain=pubmlst.org
;automated_email_address=no_reply@domain.com

#Name of preference database.
prefs_db=bigsdb_prefs

#Name of authentication database.
auth_db=bigsdb_auth

#Web-accessible path to stylesheet.  Needed only for viewing offline content
#generated by plugins such as LocusExplorer.  Default setting will be used
#unless uncommented.
#stylesheet=https://pubmlst.org/css/bigsdb.css

#Relative web paths to scripts - needed by show links between public and 
#private interfaces.
curate_script=/cgi-bin/private/bigsdb/bigscurate.pl
query_script=/cgi-bin/bigsdb/bigsdb.pl

#Specify number of days that job files will remain on server.
results_deleted_days=7

#Specify number of days before sequence BLAST database cache is marked stale.
cache_days=7

#Set intranet to '1' if clients are running without an internet connection
intranet=0

#Disable the 'this site uses cookies' message.
no_cookie_consent=0

#Set to 1 if using HTTPS. Setting this if using HTTP will prevent cookies 
#working, including those needed for logging in.
secure_cookies=0

#Set disable_updated to '1' to lock the curation interface during server
#maintenance.
disable_updates=0

#Message to display during server maintenance.
#disable_update_message=This server is undergoing maintenance.

#URL root to web-accessible documentation.
doclink=http://bigsdb.readthedocs.io/en/latest

#Maximum file upload size (MB)
max_upload_size=32

#Maximum query size (MB)
max_query_size=20

#Set PostgreSQL temporary buffers (MB) - likely to be needed if using cgMLST
#schemes. Alternatively this can be set globally in postgresql.conf.
temp_buffers=64

#Force retirement of id when deleting isolate, profile or allele records
delete_retire_only=0

#The minimum size of sequence bin that is considered to represent a genome
#assembly. This can be overridden in individual isolate database config files.
;min_genome_size=1000000

#Admin logging
#Log deletion of isolate records
admin_log=0

#User projects
#Set to allow authenticated users to set up private projects within isolate 
#databases. This can be overridden within an individual database config. 
user_projects=0

#Dashboards
#Set to globally enable dashboards as main gateway page for isolate databases
#and to set whether the dashboard should be used by default. Option to enable
#query dashboards (also requires enable_dashboard to be true).
#These options can be overridden for individual databases. 
enable_dashboard=0
default_dashboard_view=1
query_dashboard=1

###SUBMISSIONS##############
#Warning thresholds for submission interface. These can be overridden in
#individual isolate database config files.
;warn_max_contigs=500
;warn_min_n50=20000
;warn_min_total_length=1000000

#Rejection thresholds for submission interface. These can be overridden in
#individual isolate database config files.
;max_contigs=1000
;min_n50=10000
;min_total_length=1000000

###ISOLATE EMBARGOES########
#Set to enable isolate embargoes and limit the time allowed. These can be 
#overridden in individual isolate database config files.
#Values are in months.
;embargo_enabled=0
;default_embargo=12
;max_initial_embargo=24
;max_embargo=48

###DOWNLOADS################
#Require users to be logged in to download records via web interface
#Note that this is likely to prevent automated downloads (which generally
#should be done via API). These values can be overridden in the database
#config.xml file.

allele_downloads_require_login=0
profile_downloads_require_login=0
seqbin_downloads_require_login=0

###REST INTERFACE###########

#Name of database describing resources for REST interface
rest_db=bigsdb_rest

#URL of REST interface. This is only needed to add a message to the downloads
#page informing users to use the API.
;rest_url=https://rest.pubmlst.org

#Allow users to create their own API keys - this requires the use of a site-
#wide user database.
automated_api_keys=0

#Is the REST interface using a PROXY server?
rest_behind_proxy=0

#Hide E-mail addresses of curators in REST interface (sender E-mails are 
#hidden by default)
rest_hide_emails=0

#Set to log all REST calls to the rest_db. You should set a CRON job to remove
#calls older than a specified time, e.g. 7 days, to prevent this log getting
#too big.
rest_log_to_db=0

#Set to log all web calls to the auth_db. You should set a CRON job to remove
#calls older than a specified time, e.g. 7 days, to prevent this log getting
#too big.
web_log_to_db=0

#The following are just used to colour the dashboard numbers on the REST monitor.
#Numbers will incrementally change from blue to red as they increase. Numbers
#greater than those set below will be the same colour as the max value.
max_rest_hits_per_second_warn=10
max_avg_response_warn=500

###OFFLINE JOB PROCESSING###

#Name of offline job queue database (if you set this you'll also need to run
#bigsjobs.pl from a CRON job frequently). If not set, plugins that rely on
#offline processing will be unavailable.
jobs_db=bigsdb_jobs

#Require users to be logged in to use any plugin that requires use of the
#offline job manager.
jobs_require_login=0

#Do not start job if load average (over last minute) is greater than value.
max_load=8

#Do not start web-based tag scanning if load average (over last minute) is 
#greater than value. Set lower than max_load to prevent web scans blocking 
#normal sequence queries (max_load value is used if not set).
;max_load_webscan=6

#Record status of scripts such as the autotagger, autodefiner and cache renewal
#in the jobs database. Set if you want these to be included in the jobs 
#monitor.
record_scripts=0

#Record status of manual web scans in the jobs database. Set if you want these
#to be included in the jobs monitor.
record_scans=0

#The following are just used to colour the dashboard numbers on the job monitor.
#Numbers will incrementally change from blue to red as they increase. Numbers
#greater than those set below will be the same colour as the max value.
max_queued_colour_warn=10
max_running_colour_warn=10

####EMBOSS####
#used for sequence alignment in allele query

emboss_path=/usr/bin

####BLAST+ BIN DIRECTORY
#Path of directory containing BLAST+ binaries (blastn, blastx, tblastx,
#makeblastdb). It is recommended that you use statically-linked binaries
#downloaded from NCBI.

blast+_path=/usr/local/ncbi-blast+/bin

####MAXIMUM NUMBER OF BLAST THREADS
#Do not set to > number of processor cores
blast_threads=1

####MUSCLE#####
#Path of muscle executable and maximum memory it can use (MB)
#Note that this expects MUSCLE v3. Version 5 is not supported.

muscle_path=/usr/bin/muscle
max_muscle_mb=4096

####MAFFT######
#Path of mafft executable
#Must be version 6.840 or higher

mafft_path=/usr/bin/mafft
mafft_threads=1

####IPCRESS####
#Path of ipcress executable

ipcress_path=/usr/bin/ipcress 

####SPLITSTREE#
#Note that only v4 is supported.
splitstree_path=/usr/bin/splitstree4

####CLUSTALW###
clustalw_path=/usr/bin/clustalw

####BLAT#######
#Only needed if working with eukaryote genomes containing introns
#blat_path=/usr/local/bin/blat

##REFERENCE DB#
#Set to reference dbase name if you have set up a local reference database.
#You will need to run the accompaning getrefs.pl script regularly to
#keep this updated (unless you're mirroring another system)

ref_db=bigsdb_refs

#EXPORT###########
#Threshold for number of records before export job is sent to the offline job
#manager instead of running immediately.
;export_instant_run=2000

#BLAST ANALYSIS###
#Limits for number of isolates to analyse. Lower limit set if TBLASTX chosen.
blast_record_limit=10000
tblastx_record_limit=500

#GENOME COMPARATOR
#It is recommended that you use at least 2 threads. It is not currently
#possible to cancel a running job when only a single thread is used.
genome_comparator_limit=1000
genome_comparator_threads=2

#ITOL#############
#Note that you must register with iTOL for an API key. This requires a 
#subscription. You will also need to create a project within your iTOL
#account and set the name of this project below.
;itol_api_key=xxxxxxxx
;itol_project_name=User jobs
itol_record_limit=2000
itol_seq_limit=100000

#MICROREACT#######
;microreact_token=xxxxxxxx
microreact_record_limit=2000
microreact_seq_limit=100000

#PHYLOVIZ#########
#Enter Phyloviz account details - these need to be registered with PhyloViz
;phyloviz_user=xxxxxxxx
;phyloviz_passwd=xxxxxxxx

#GrapeTree########
#Install GrapeTree from https://github.com/achtman-lab/GrapeTree
#It is recommended that you use a virtual environment. Set grapetree_path to 
#the full command needed to run grapetree (including the Python interpreter).

#Copy MSTree_holder.html to a directory in the website and list its location
#relative to the root of the website 'MSTree_holder_rel_path'.
#The 'static' directory should be a sub-directory of the directory containing
#MSTree_holder.html
;grapetree_path=/home/bigsdb/grapetree/.venv/bin/python3 /home/bigsdb/grapetree/.venv/bin/grapetree
;MSTree_holder_rel_path=/GrapeTree/MSTree_holder.html
grapetree_limit=10000

#Kleborate########
#Install Kleborate from https://github.com/klebgenomics/Kleborate
;kleborate_path=/usr/local/bin/kleborate
;kleborate_record_limit=1000

#Kaptive########
#Install Kaptive from https://github.com/klebgenomics/Kaptive
;kaptive_path=/home/bigsdb/kaptive/.venv/bin/python3 /home/bigsdb/kaptive/.venv/bin/kaptive
;kaptive_record_limit=1000

#PlasmidFinder####
#Install PlasmidFinder and databases using Docker (see https://bitbucket.org/genomicepidemiology/plasmidfinder)
#Set the flag to 1 to indicate that it has been installed. Set the path to the PlasmidFinder databases.
#If the web server and database servers are separate machines and you do not wish to install on the
#web server (because the job will be run elsewhere) then set plasmidfinder_noweb=1. This will disable the
#version check on the plugin form. If you do not set this, you need to make sure both the bigsdb and apache 
#(www-data on Ubuntu) users are members of the docker group.
plasmidfinder=0
;plasmidfinder_noweb=0
;plasmidfinder_db_path=/home/bigsdb/plasmidfinder_db
plasmidfinder_record_limit=1000

#weasyprint######
#Only needed for Reports plugin
;weasyprint_path=/usr/bin/weasyprint

#snp-sites##########
;snp_sites_path=/usr/bin/snp-sites

#GeneScanner########
genescanner_path=/home/bigsdb/genescanner/.venv/bin/python3 /home/bigsdb/genescanner/GeneScanner/mutation_analysis.py

#Gene Presence#######
genepresence_taxa_limit=10000
genepresence_record_limit=500000

#ReporTree##########
;reportree_path=/home/bigsdb/miniconda3/envs/reportree/bin/python3 /home/bigsdb/ReporTree/reportree.py
reportree_limit=10000

#RMLST SPECIES ID###
#Register for a PubMLST API key and obtain an access token and secret for an 
#account with access to the rMLST typing database.
#Use the get_oauth_access_token.pl script to obtain the access token with web 
#address: https://pubmlst.org/bigsdb?db=pubmlst_rmlst_seqdef and REST API 
#address: https://rest.pubmlst.org/db/pubmlst_rmlst_seqdef.
#Multiple concurrent connections are restricted so please do not set threads 
#to >1 unless authorised. 

species_id_threads=1
;rmlst_client_key=xxxxxxxxxxxx
;rmlst_client_secret=xxxxxxxxxxxx
;rmlst_access_token=xxxxxxxxxxxx
;rmlst_access_secret=xxxxxxxxxxxx

#MAPPING############
#Set the option for displaying location maps.
#Note for Esri/ArcGIS services you must register 
#[https://developers.arcgis.com/en/sign-up/] 
#and abide by terms of service [https://developers.arcgis.com/en/terms/].
#For MapTiler you need to register and get an API key [https://www.maptiler.com/]. 

#0: OpenStreetMaps only
#1: OpenStreetMaps + MapTiler satellite imagery
#2: OpenStreetMaps + Esri/ArcGIS World Imagery (satellite)
#3: Esri/ArcGIS World Street Map + Esri/ArcGIS World Imagery (satellite) 

mapping_option=0
;maptiler_api_key=xxxxxxxxxx
